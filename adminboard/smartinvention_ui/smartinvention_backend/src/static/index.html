<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Smart UI for Manus - Êô∫ËÉΩÁÆ°ÁêÜÁ≥ªÁµ±</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e1e1e 0%, #2d2d30 100%);
            color: #cccccc;
            height: 100vh;
            overflow: hidden;
        }

        .container {
            display: flex;
            height: 100vh;
            background: #1e1e1e;
        }

        /* Â∑¶ÂÅ¥Êô∫ËÉΩÂÑÄË°®Êùø */
        .smart-dashboard {
            width: 350px;
            background: linear-gradient(180deg, #252526 0%, #2d2d30 100%);
            border-right: 1px solid #3c3c3c;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0,0,0,0.3);
        }

        .dashboard-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #4ec9b0;
        }

        .dashboard-title {
            font-size: 18px;
            font-weight: 700;
            color: #ffffff;
            margin-left: 12px;
            background: linear-gradient(45deg, #4ec9b0, #569cd6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .smart-section {
            margin-bottom: 28px;
            background: rgba(45, 45, 48, 0.6);
            border-radius: 12px;
            padding: 16px;
            border: 1px solid #3c3c3c;
            transition: all 0.3s ease;
        }

        .smart-section:hover {
            background: rgba(45, 45, 48, 0.8);
            border-color: #4ec9b0;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(78, 201, 176, 0.2);
        }

        .section-title {
            font-size: 14px;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 16px;
            background: linear-gradient(45deg, #4ec9b0, #569cd6);
            margin-right: 8px;
            border-radius: 2px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .status-card {
            background: #1e1e1e;
            border-radius: 8px;
            padding: 12px;
            border: 1px solid #3c3c3c;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .status-card:hover {
            border-color: #4ec9b0;
            background: #252526;
        }

        .status-card.active {
            border-color: #4ec9b0;
            background: rgba(78, 201, 176, 0.1);
        }

        .status-card.warning {
            border-color: #dcdcaa;
            background: rgba(220, 220, 170, 0.1);
        }

        .status-card.error {
            border-color: #f44747;
            background: rgba(244, 71, 71, 0.1);
        }

        .status-label {
            font-size: 10px;
            color: #cccccc;
            margin-bottom: 4px;
            text-transform: uppercase;
        }

        .status-value {
            font-size: 12px;
            font-weight: 600;
            color: #ffffff;
        }

        .smart-metrics {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: #1e1e1e;
            border-radius: 6px;
            border-left: 3px solid #4ec9b0;
        }

        .metric-label {
            font-size: 11px;
            color: #cccccc;
        }

        .metric-value {
            font-size: 12px;
            font-weight: 600;
            color: #4ec9b0;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .smart-button {
            width: 100%;
            padding: 12px 16px;
            background: linear-gradient(45deg, #4ec9b0, #569cd6);
            border: none;
            border-radius: 8px;
            color: #ffffff;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .smart-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(78, 201, 176, 0.4);
        }

        .smart-button.secondary {
            background: linear-gradient(45deg, #569cd6, #dcdcaa);
        }

        .smart-button.danger {
            background: linear-gradient(45deg, #f44747, #ff6b6b);
        }

        /* ‰∏≠ÈñìÊô∫ËÉΩÊìç‰ΩúÂçÄ */
        .smart-workspace {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #1e1e1e;
        }

        .workspace-header {
            padding: 20px 24px;
            background: linear-gradient(90deg, #252526 0%, #2d2d30 100%);
            border-bottom: 1px solid #3c3c3c;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .workspace-title {
            font-size: 20px;
            font-weight: 700;
            color: #ffffff;
            display: flex;
            align-items: center;
        }

        .workspace-title::before {
            content: 'üß†';
            margin-right: 12px;
            font-size: 24px;
        }

        .workspace-tabs {
            display: flex;
            gap: 4px;
        }

        .workspace-tab {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid #3c3c3c;
            border-radius: 6px;
            color: #cccccc;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .workspace-tab.active {
            background: #4ec9b0;
            color: #1e1e1e;
            border-color: #4ec9b0;
        }

        .workspace-content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }

        .smart-panel {
            background: linear-gradient(135deg, #252526 0%, #2d2d30 100%);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid #3c3c3c;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .panel-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid #3c3c3c;
        }

        .panel-title {
            font-size: 16px;
            font-weight: 600;
            color: #4ec9b0;
            display: flex;
            align-items: center;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-label {
            font-size: 12px;
            color: #ffffff;
            margin-bottom: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-input {
            padding: 12px 16px;
            background: #1e1e1e;
            border: 1px solid #3c3c3c;
            border-radius: 6px;
            color: #cccccc;
            font-size: 13px;
            transition: all 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #4ec9b0;
            box-shadow: 0 0 0 2px rgba(78, 201, 176, 0.2);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }

        /* Âè≥ÂÅ¥Êô∫ËÉΩÁõ£ÊéßÂçÄ */
        .smart-monitor {
            width: 380px;
            background: linear-gradient(180deg, #252526 0%, #2d2d30 100%);
            border-left: 1px solid #3c3c3c;
            display: flex;
            flex-direction: column;
            box-shadow: -2px 0 10px rgba(0,0,0,0.3);
        }

        .monitor-header {
            padding: 20px 24px;
            background: #2d2d30;
            border-bottom: 1px solid #3c3c3c;
        }

        .monitor-title {
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
            display: flex;
            align-items: center;
        }

        .monitor-title::before {
            content: 'üìä';
            margin-right: 8px;
        }

        .monitor-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .monitor-section {
            margin-bottom: 24px;
            background: rgba(30, 30, 30, 0.6);
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #3c3c3c;
        }

        .monitor-section-title {
            font-size: 12px;
            color: #ffffff;
            margin-bottom: 12px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .log-container {
            background: #1e1e1e;
            border: 1px solid #3c3c3c;
            border-radius: 6px;
            padding: 12px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 10px;
        }

        .log-entry {
            margin-bottom: 4px;
            color: #cccccc;
            display: flex;
            align-items: flex-start;
        }

        .log-timestamp {
            color: #569cd6;
            margin-right: 8px;
            min-width: 60px;
        }

        .log-entry.info {
            color: #4ec9b0;
        }

        .log-entry.warning {
            color: #dcdcaa;
        }

        .log-entry.error {
            color: #f44747;
        }

        .data-visualization {
            background: #1e1e1e;
            border-radius: 6px;
            padding: 16px;
            border: 1px solid #3c3c3c;
            margin-bottom: 16px;
        }

        .chart-placeholder {
            height: 120px;
            background: linear-gradient(45deg, rgba(78, 201, 176, 0.1), rgba(86, 156, 214, 0.1));
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4ec9b0;
            font-size: 12px;
        }

        /* ÈüøÊáâÂºèË®≠Ë®à */
        @media (max-width: 1200px) {
            .smart-dashboard {
                width: 300px;
            }
            .smart-monitor {
                width: 320px;
            }
        }

        /* ÂãïÁï´ÊïàÊûú */
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .status-card.active {
            animation: pulse 2s infinite;
        }

        /* ÊªæÂãïÊ¢ùÊ®£Âºè */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #1e1e1e;
        }

        ::-webkit-scrollbar-thumb {
            background: #4ec9b0;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #5dd4b7;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Â∑¶ÂÅ¥Êô∫ËÉΩÂÑÄË°®Êùø -->
        <div class="smart-dashboard">
            <div class="dashboard-header">
                <span>üß†</span>
                <div class="dashboard-title">Enhanced Smart UI</div>
            </div>

            <!-- Á≥ªÁµ±ÁãÄÊÖã -->
            <div class="smart-section">
                <div class="section-title">üîã Á≥ªÁµ±ÁãÄÊÖã</div>
                <div class="status-grid">
                    <div class="status-card active" id="manusStatus">
                        <div class="status-label">Manus Á≥ªÁµ±</div>
                        <div class="status-value">ÈÅãË°å‰∏≠</div>
                    </div>
                    <div class="status-card active" id="traeStatus">
                        <div class="status-label">TRAE Á≥ªÁµ±</div>
                        <div class="status-value">ÈÅãË°å‰∏≠</div>
                    </div>
                    <div class="status-card active" id="mcpStatus">
                        <div class="status-label">MCP ÂçîË™øÂô®</div>
                        <div class="status-value">Ê≠£Â∏∏</div>
                    </div>
                    <div class="status-card active" id="dbStatus">
                        <div class="status-label">Êï∏ÊìöÂ∫´</div>
                        <div class="status-value">ÈÄ£Êé•‰∏≠</div>
                    </div>
                </div>
            </div>

            <!-- Êô∫ËÉΩÊåáÊ®ô -->
            <div class="smart-section">
                <div class="section-title">üìà Êô∫ËÉΩÊåáÊ®ô</div>
                <div class="smart-metrics">
                    <div class="metric-item">
                        <span class="metric-label">ËôïÁêÜÊïàÁéá</span>
                        <span class="metric-value" id="efficiency">98.5%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">ÈüøÊáâÊôÇÈñì</span>
                        <span class="metric-value" id="responseTime">125ms</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">ÊàêÂäüÁéá</span>
                        <span class="metric-value" id="successRate">99.2%</span>
                    </div>
                    <div class="metric-item">
                        <span class="metric-label">Ê¥ªË∫çÈÄ£Êé•</span>
                        <span class="metric-value" id="activeConnections">24</span>
                    </div>
                </div>
            </div>

            <!-- Êô∫ËÉΩÊìç‰Ωú -->
            <div class="smart-section">
                <div class="section-title">üöÄ Êô∫ËÉΩÊìç‰Ωú</div>
                <div class="action-buttons">
                    <button class="smart-button" onclick="runSmartAnalysis()">
                        üß† Êô∫ËÉΩÂàÜÊûê
                    </button>
                    <button class="smart-button secondary" onclick="optimizeSystem()">
                        ‚ö° Á≥ªÁµ±ÂÑ™Âåñ
                    </button>
                    <button class="smart-button" onclick="syncData()">
                        üîÑ Êï∏ÊìöÂêåÊ≠•
                    </button>
                    <button class="smart-button danger" onclick="emergencyStop()">
                        üõë Á∑äÊÄ•ÂÅúÊ≠¢
                    </button>
                </div>
            </div>
        </div>

        <!-- ‰∏≠ÈñìÊô∫ËÉΩÊìç‰ΩúÂçÄ -->
        <div class="smart-workspace">
            <div class="workspace-header">
                <div class="workspace-title">Manus Êô∫ËÉΩÁÆ°ÁêÜ‰∏≠ÂøÉ</div>
                <div class="workspace-tabs">
                    <button class="workspace-tab active" onclick="switchWorkspace('manus')">Manus ÊéßÂà∂</button>
                    <button class="workspace-tab" onclick="switchWorkspace('trae')">TRAE ‰ªãÂÖ•</button>
                    <button class="workspace-tab" onclick="switchWorkspace('analytics')">Êô∫ËÉΩÂàÜÊûê</button>
                </div>
            </div>

            <div class="workspace-content">
                <!-- Manus ÊéßÂà∂Èù¢Êùø -->
                <div id="manus-workspace" class="smart-panel">
                    <div class="panel-header">
                        <div class="panel-title">üîµ Manus Êô∫ËÉΩÊéßÂà∂Èù¢Êùø</div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">Manus ‰ªªÂãô URL</label>
                            <input type="text" class="form-input" id="manusUrl" 
                                   value="https://manus.im/app/GrrtiY4cAAEVpH3RxpJDDb" 
                                   placeholder="Ëº∏ÂÖ• Manus ‰ªªÂãô URL">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Êô∫ËÉΩÊìç‰ΩúÊ®°Âºè</label>
                            <select class="form-input" id="smartMode">
                                <option value="auto">Ëá™ÂãïÊô∫ËÉΩÊ®°Âºè</option>
                                <option value="guided">ÂºïÂ∞éÂºèÊìç‰Ωú</option>
                                <option value="manual">ÊâãÂãïÊéßÂà∂</option>
                                <option value="learning">Â≠∏ÁøíÊ®°Âºè</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Êô∫ËÉΩÊåá‰ª§</label>
                        <textarea class="form-input form-textarea" id="smartCommand" 
                                  placeholder="Ëº∏ÂÖ•Êô∫ËÉΩÊåá‰ª§ÊàñËÆì AI Ëá™ÂãïÂàÜÊûê..."></textarea>
                    </div>

                    <div class="action-buttons" style="flex-direction: row; gap: 12px;">
                        <button class="smart-button" onclick="executeSmartCommand()">
                            üß† Âü∑Ë°åÊô∫ËÉΩÊåá‰ª§
                        </button>
                        <button class="smart-button secondary" onclick="analyzeManusData()">
                            üìä ÂàÜÊûê Manus Êï∏Êìö
                        </button>
                        <button class="smart-button" onclick="autoOptimize()">
                            ‚ö° Ëá™ÂãïÂÑ™Âåñ
                        </button>
                    </div>
                </div>

                <!-- TRAE ‰ªãÂÖ•Èù¢Êùø -->
                <div id="trae-workspace" class="smart-panel" style="display: none;">
                    <div class="panel-header">
                        <div class="panel-title">üü° TRAE Êô∫ËÉΩ‰ªãÂÖ•Èù¢Êùø</div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">‰ªãÂÖ•È°ûÂûã</label>
                            <select class="form-input" id="traeInterventionType">
                                <option value="code_optimization">‰ª£Á¢ºÂÑ™Âåñ</option>
                                <option value="bug_detection">ÈåØË™§Ê™¢Ê∏¨</option>
                                <option value="performance_analysis">ÊÄßËÉΩÂàÜÊûê</option>
                                <option value="security_audit">ÂÆâÂÖ®ÂØ©Ë®à</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Êô∫ËÉΩÁ¥öÂà•</label>
                            <select class="form-input" id="traeSmartLevel">
                                <option value="basic">Âü∫Á§éÊô∫ËÉΩ</option>
                                <option value="advanced">È´òÁ¥öÊô∫ËÉΩ</option>
                                <option value="expert">Â∞àÂÆ∂Ê®°Âºè</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">‰ª£Á¢ºÂÖßÂÆπ</label>
                        <textarea class="form-input form-textarea" id="traeCodeContent" 
                                  placeholder="Ë≤º‰∏äÈúÄË¶ÅÊô∫ËÉΩÂàÜÊûêÁöÑ‰ª£Á¢º..."></textarea>
                    </div>

                    <div class="action-buttons" style="flex-direction: row; gap: 12px;">
                        <button class="smart-button" onclick="executeTraeIntervention()">
                            üß† Âü∑Ë°åÊô∫ËÉΩ‰ªãÂÖ•
                        </button>
                        <button class="smart-button secondary" onclick="analyzeCode()">
                            üîç ‰ª£Á¢ºÂàÜÊûê
                        </button>
                        <button class="smart-button" onclick="generateSuggestions()">
                            üí° ÁîüÊàêÂª∫Ë≠∞
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Âè≥ÂÅ¥Êô∫ËÉΩÁõ£ÊéßÂçÄ -->
        <div class="smart-monitor">
            <div class="monitor-header">
                <div class="monitor-title">Êô∫ËÉΩÁõ£Êéß‰∏≠ÂøÉ</div>
            </div>

            <div class="monitor-content">
                <!-- ÂØ¶ÊôÇÊï∏ÊìöÂèØË¶ñÂåñ -->
                <div class="monitor-section">
                    <div class="monitor-section-title">üìä ÂØ¶ÊôÇÊï∏ÊìöÊµÅ</div>
                    <div class="data-visualization">
                        <div class="chart-placeholder">
                            ÂØ¶ÊôÇÊï∏ÊìöÂúñË°® (Âç≥Â∞áËºâÂÖ•...)
                        </div>
                    </div>
                </div>

                <!-- Êô∫ËÉΩÊó•Ë™å -->
                <div class="monitor-section">
                    <div class="monitor-section-title">üìù Êô∫ËÉΩÁ≥ªÁµ±Êó•Ë™å</div>
                    <div class="log-container" id="smartLogs">
                        <div class="log-entry info">
                            <span class="log-timestamp">10:32:15</span>
                            <span>[INFO] Enhanced Smart UI Á≥ªÁµ±ÂïüÂãïÂÆåÊàê</span>
                        </div>
                        <div class="log-entry info">
                            <span class="log-timestamp">10:32:16</span>
                            <span>[INFO] MCP ÂçîË™øÂô®ÈÄ£Êé•ÊàêÂäü</span>
                        </div>
                        <div class="log-entry info">
                            <span class="log-timestamp">10:32:17</span>
                            <span>[INFO] Êô∫ËÉΩÂàÜÊûêÂºïÊìéÂ∑≤Â∞±Á∑í</span>
                        </div>
                    </div>
                </div>

                <!-- MCP ÈÅ©ÈÖçÂô®ÁãÄÊÖã -->
                <div class="monitor-section">
                    <div class="monitor-section-title">üîå MCP ÈÅ©ÈÖçÂô®ÁãÄÊÖã</div>
                    <div class="smart-metrics">
                        <div class="metric-item">
                            <span class="metric-label">SmartInvention MCP</span>
                            <span class="metric-value">ÈÅãË°å‰∏≠</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">RL SRT MCP</span>
                            <span class="metric-value">ÈÅãË°å‰∏≠</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Cloud Edge MCP</span>
                            <span class="metric-value">ÂæÖÊ©ü‰∏≠</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">Interaction Log MCP</span>
                            <span class="metric-value">ÈÅãË°å‰∏≠</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ÂÖ®Â±ÄËÆäÈáè
        let currentWorkspace = 'manus';
        let smartAnalysisRunning = false;

        // ÂàáÊèõÂ∑•‰ΩúÂçÄ
        function switchWorkspace(workspace) {
            // Êõ¥Êñ∞Ê®ôÁ±§ÁãÄÊÖã
            document.querySelectorAll('.workspace-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            // Èö±ËóèÊâÄÊúâÂ∑•‰ΩúÂçÄ
            document.getElementById('manus-workspace').style.display = 'none';
            document.getElementById('trae-workspace').style.display = 'none';

            // È°ØÁ§∫ÈÅ∏‰∏≠ÁöÑÂ∑•‰ΩúÂçÄ
            if (workspace === 'manus') {
                document.getElementById('manus-workspace').style.display = 'block';
            } else if (workspace === 'trae') {
                document.getElementById('trae-workspace').style.display = 'block';
            }

            currentWorkspace = workspace;
            addSmartLog(`ÂàáÊèõÂà∞ ${workspace.toUpperCase()} Â∑•‰ΩúÂçÄ`, 'info');
        }

        // Âü∑Ë°åÊô∫ËÉΩÊåá‰ª§
        async function executeSmartCommand() {
            const url = document.getElementById('manusUrl').value;
            const mode = document.getElementById('smartMode').value;
            const command = document.getElementById('smartCommand').value;

            addSmartLog(`Âü∑Ë°åÊô∫ËÉΩÊåá‰ª§: ${mode} Ê®°Âºè`, 'info');

            try {
                const response = await fetch('/api/smart/execute', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        url: url,
                        mode: mode,
                        command: command,
                        workspace: currentWorkspace
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    addSmartLog(`Êô∫ËÉΩÊåá‰ª§Âü∑Ë°åÊàêÂäü: ${result.message}`, 'info');
                } else {
                    addSmartLog(`Êô∫ËÉΩÊåá‰ª§Âü∑Ë°åÂ§±Êïó: ${result.error}`, 'error');
                }
            } catch (error) {
                addSmartLog(`Êô∫ËÉΩÊåá‰ª§Âü∑Ë°åÈåØË™§: ${error.message}`, 'error');
            }
        }

        // Âü∑Ë°å TRAE Êô∫ËÉΩ‰ªãÂÖ•
        async function executeTraeIntervention() {
            const interventionType = document.getElementById('traeInterventionType').value;
            const smartLevel = document.getElementById('traeSmartLevel').value;
            const codeContent = document.getElementById('traeCodeContent').value;

            addSmartLog(`Âü∑Ë°å TRAE Êô∫ËÉΩ‰ªãÂÖ•: ${interventionType}`, 'info');

            try {
                const response = await fetch('/api/trae/intervention', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        intervention_type: interventionType,
                        smart_level: smartLevel,
                        code_content: codeContent
                    })
                });

                const result = await response.json();
                
                if (result.success) {
                    addSmartLog(`TRAE Êô∫ËÉΩ‰ªãÂÖ•ÊàêÂäü: ${result.message}`, 'info');
                } else {
                    addSmartLog(`TRAE Êô∫ËÉΩ‰ªãÂÖ•Â§±Êïó: ${result.error}`, 'error');
                }
            } catch (error) {
                addSmartLog(`TRAE Êô∫ËÉΩ‰ªãÂÖ•ÈåØË™§: ${error.message}`, 'error');
            }
        }

        // ÈÅãË°åÊô∫ËÉΩÂàÜÊûê
        function runSmartAnalysis() {
            if (smartAnalysisRunning) {
                addSmartLog('Êô∫ËÉΩÂàÜÊûêÊ≠£Âú®ÈÄ≤Ë°å‰∏≠...', 'warning');
                return;
            }

            smartAnalysisRunning = true;
            addSmartLog('ÈñãÂßãÊô∫ËÉΩÂàÜÊûê...', 'info');

            // Ê®°Êì¨Êô∫ËÉΩÂàÜÊûêÈÅéÁ®ã
            setTimeout(() => {
                addSmartLog('Êô∫ËÉΩÂàÜÊûêÂÆåÊàê - ÁôºÁèæ 3 ÂÄãÂÑ™ÂåñÂª∫Ë≠∞', 'info');
                updateMetrics();
                smartAnalysisRunning = false;
            }, 3000);
        }

        // Á≥ªÁµ±ÂÑ™Âåñ
        function optimizeSystem() {
            addSmartLog('ÈñãÂßãÁ≥ªÁµ±ÂÑ™Âåñ...', 'info');
            setTimeout(() => {
                addSmartLog('Á≥ªÁµ±ÂÑ™ÂåñÂÆåÊàê - ÊÄßËÉΩÊèêÂçá 15%', 'info');
                updateMetrics();
            }, 2000);
        }

        // Êï∏ÊìöÂêåÊ≠•
        function syncData() {
            addSmartLog('ÈñãÂßãÊï∏ÊìöÂêåÊ≠•...', 'info');
            setTimeout(() => {
                addSmartLog('Êï∏ÊìöÂêåÊ≠•ÂÆåÊàê - ÂêåÊ≠• 1,247 Ê¢ùË®òÈåÑ', 'info');
            }, 1500);
        }

        // Á∑äÊÄ•ÂÅúÊ≠¢
        function emergencyStop() {
            addSmartLog('Âü∑Ë°åÁ∑äÊÄ•ÂÅúÊ≠¢Á®ãÂ∫è...', 'warning');
            setTimeout(() => {
                addSmartLog('ÊâÄÊúâÈùûÈóúÈçµÈÄ≤Á®ãÂ∑≤ÂÆâÂÖ®ÂÅúÊ≠¢', 'warning');
            }, 1000);
        }

        // ÂàÜÊûê Manus Êï∏Êìö
        function analyzeManusData() {
            addSmartLog('ÈñãÂßãÂàÜÊûê Manus Êï∏Êìö...', 'info');
            setTimeout(() => {
                addSmartLog('Manus Êï∏ÊìöÂàÜÊûêÂÆåÊàê - Ë≠òÂà• 5 ÂÄãÈóúÈçµÊ®°Âºè', 'info');
            }, 2500);
        }

        // Ëá™ÂãïÂÑ™Âåñ
        function autoOptimize() {
            addSmartLog('ÂïüÂãïËá™ÂãïÂÑ™ÂåñÂºïÊìé...', 'info');
            setTimeout(() => {
                addSmartLog('Ëá™ÂãïÂÑ™ÂåñÂÆåÊàê - ÈüøÊáâÊôÇÈñìÊ∏õÂ∞ë 23%', 'info');
                updateMetrics();
            }, 3500);
        }

        // ‰ª£Á¢ºÂàÜÊûê
        function analyzeCode() {
            addSmartLog('ÈñãÂßãÊô∫ËÉΩ‰ª£Á¢ºÂàÜÊûê...', 'info');
            setTimeout(() => {
                addSmartLog('‰ª£Á¢ºÂàÜÊûêÂÆåÊàê - ÁôºÁèæ 2 ÂÄãÊΩõÂú®ÂïèÈ°å', 'warning');
            }, 2000);
        }

        // ÁîüÊàêÂª∫Ë≠∞
        function generateSuggestions() {
            addSmartLog('ÁîüÊàêÊô∫ËÉΩÂª∫Ë≠∞...', 'info');
            setTimeout(() => {
                addSmartLog('Â∑≤ÁîüÊàê 7 Ê¢ùÂÑ™ÂåñÂª∫Ë≠∞', 'info');
            }, 1500);
        }

        // Ê∑ªÂä†Êô∫ËÉΩÊó•Ë™å
        function addSmartLog(message, type = 'info') {
            const logContainer = document.getElementById('smartLogs');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            
            logEntry.innerHTML = `
                <span class="log-timestamp">${timestamp}</span>
                <span>[${type.toUpperCase()}] ${message}</span>
            `;
            
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
            
            // ÈôêÂà∂Êó•Ë™åÊ¢ùÁõÆÊï∏Èáè
            const entries = logContainer.children;
            if (entries.length > 50) {
                logContainer.removeChild(entries[0]);
            }
        }

        // Êõ¥Êñ∞ÊåáÊ®ô
        function updateMetrics() {
            const efficiency = (95 + Math.random() * 5).toFixed(1);
            const responseTime = Math.floor(100 + Math.random() * 50);
            const successRate = (98 + Math.random() * 2).toFixed(1);
            const connections = Math.floor(20 + Math.random() * 10);

            document.getElementById('efficiency').textContent = efficiency + '%';
            document.getElementById('responseTime').textContent = responseTime + 'ms';
            document.getElementById('successRate').textContent = successRate + '%';
            document.getElementById('activeConnections').textContent = connections;
        }

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            addSmartLog('Enhanced Smart UI for Manus ÂàùÂßãÂåñÂÆåÊàê', 'info');
            addSmartLog('ÊâÄÊúâÊô∫ËÉΩÊ®°ÁµÑÂ∑≤ËºâÂÖ•', 'info');
            
            // ÂÆöÊúüÊõ¥Êñ∞ÊåáÊ®ô
            setInterval(updateMetrics, 5000);
            
            // Ê®°Êì¨ÂØ¶ÊôÇÊï∏Êìö
            setInterval(() => {
                if (Math.random() > 0.7) {
                    const events = [
                        'Ê™¢Ê∏¨Âà∞Êñ∞ÁöÑ Manus Â∞çË©±',
                        'TRAE ‰ª£Á¢ºÂàÜÊûêÂÆåÊàê',
                        'MCP ÈÅ©ÈÖçÂô®ÁãÄÊÖãÊõ¥Êñ∞',
                        'Êô∫ËÉΩÂÑ™ÂåñÂª∫Ë≠∞ÁîüÊàê',
                        'Êï∏ÊìöÂêåÊ≠•ÈÄ≤Ë°å‰∏≠'
                    ];
                    const event = events[Math.floor(Math.random() * events.length)];
                    addSmartLog(event, 'info');
                }
            }, 8000);
        });
    </script>
</body>
</html>

