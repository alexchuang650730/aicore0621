# Trae VS Codeæ’ä»¶æ§åˆ¶å™¨ - ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ¦‚è¿°

Trae VS Codeæ’ä»¶æ§åˆ¶å™¨æ˜¯å°ˆé–€ç‚ºæ§åˆ¶VS Codeä¸­çš„Traeæ’ä»¶è€Œè¨­è¨ˆçš„è‡ªå‹•åŒ–å·¥å…·ã€‚å®ƒä½¿ç”¨PlaywrightæŠ€è¡“ä¾†æ¨¡æ“¬ç”¨æˆ¶æ“ä½œï¼Œå¯¦ç¾å°Traeæ’ä»¶çš„ç¨‹åºåŒ–æ§åˆ¶ã€‚

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### VS Code + Traeæ’ä»¶å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VS Code çª—å£                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ–‡ä»¶    â”‚ ç·¨è¼¯å™¨å€åŸŸ              â”‚ Traeæ’ä»¶é¢æ¿            â”‚
â”‚ è³‡æº    â”‚ (Documentation.tsx)     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ ç®¡ç†å™¨  â”‚                         â”‚ â”‚ å°è©±æ­·å²            â”‚ â”‚
â”‚         â”‚                         â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”œâ”€docs  â”‚ const Documentation...  â”‚ â”‚ â”‚ Alex Chuang     â”‚ â”‚ â”‚
â”‚ â”œâ”€src   â”‚                         â”‚ â”‚ â”‚ ä½ å¥½...         â”‚ â”‚ â”‚
â”‚ â””â”€...   â”‚                         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚         â”‚                         â”‚ â”‚                     â”‚ â”‚
â”‚         â”‚                         â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚         â”‚                         â”‚ â”‚ â”‚ è¼¸å…¥æ¡†          â”‚ â”‚ â”‚
â”‚         â”‚                         â”‚ â”‚ â”‚ [n____________] â”‚ â”‚ â”‚
â”‚         â”‚                         â”‚ â”‚ â”‚ [æ™ºèƒ½é«”][ç™¼é€]  â”‚ â”‚ â”‚
â”‚         â”‚                         â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚         â”‚                         â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. ç’°å¢ƒæº–å‚™

#### å®‰è£ä¾è³´
```bash
cd manus-task-manager
npm install
```

#### å•Ÿå‹•VS Codeï¼ˆèª¿è©¦æ¨¡å¼ï¼‰
```bash
# macOS
/Applications/Visual\ Studio\ Code.app/Contents/MacOS/Electron --remote-debugging-port=9222 /path/to/your/project

# Linux
code --remote-debugging-port=9222 /path/to/your/project

# Windows
"C:\Users\%USERNAME%\AppData\Local\Programs\Microsoft VS Code\Code.exe" --remote-debugging-port=9222 C:\path\to\your\project
```

#### ç¢ºä¿Traeæ’ä»¶å·²å®‰è£ä¸¦æ‰“é–‹
1. åœ¨VS Codeä¸­å®‰è£Traeæ’ä»¶
2. æ‰“é–‹Traeé¢æ¿ï¼ˆé€šå¸¸åœ¨å³å´é‚Šæ¬„ï¼‰
3. ç¢ºä¿å¯ä»¥çœ‹åˆ°å°è©±ç•Œé¢å’Œè¼¸å…¥æ¡†

### 2. åŸºæœ¬ä½¿ç”¨

#### å‘½ä»¤è¡Œæ–¹å¼
```bash
# ç™¼é€æ¶ˆæ¯
node src/trae-vscode-cli.js send "ä½ å¥½ï¼Œé€™æ˜¯æ¸¬è©¦æ¶ˆæ¯"

# æå–å°è©±æ­·å²
node src/trae-vscode-cli.js history

# æ¸¬è©¦é€£æ¥
node src/trae-vscode-cli.js test

# æˆªåœ–èª¿è©¦
node src/trae-vscode-cli.js screenshot
```

#### ç·¨ç¨‹æ–¹å¼
```javascript
const { TraeVSCodeController } = require('./src/trae-vscode-controller');

async function example() {
    const controller = new TraeVSCodeController({
        workspaceDir: '/path/to/your/project',
        headless: false
    });
    
    try {
        // åˆå§‹åŒ–
        await controller.initialize();
        
        // ç™¼é€æ¶ˆæ¯
        const result = await controller.sendMessage('æ¸¬è©¦æ¶ˆæ¯');
        console.log('ç™¼é€çµæœ:', result);
        
        // æå–æ­·å²
        const history = await controller.extractHistory();
        console.log('æ­·å²è¨˜éŒ„:', history);
        
    } finally {
        await controller.cleanup();
    }
}

example();
```

## ğŸ”§ é…ç½®é¸é …

### åŸºæœ¬é…ç½®
```javascript
{
    // VS Codeé…ç½®
    vscodeExecutablePath: '/Applications/Visual Studio Code.app/Contents/MacOS/Electron',
    workspaceDir: '/path/to/your/project',
    
    // æ§åˆ¶é…ç½®
    headless: false,        // æ˜¯å¦ç„¡é ­æ¨¡å¼
    timeout: 30000,         // è¶…æ™‚æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰
    waitTime: 2000,         // ç­‰å¾…æ™‚é–“ï¼ˆæ¯«ç§’ï¼‰
    
    // è¼¸å‡ºé…ç½®
    outputDir: '/tmp/trae-vscode',
    logLevel: 'info'
}
```

### é¸æ“‡å™¨é…ç½®
```javascript
{
    selectors: {
        // Traeé¢æ¿
        traePanel: '[data-view-id="trae"]',
        traeSidebar: '.sidebar-pane-header:has-text("Trae")',
        
        // è¼¸å…¥æ¡†å’ŒæŒ‰éˆ•
        inputBox: 'textarea[placeholder*="è¼¸å…¥"], input[type="text"]',
        sendButton: 'button[title*="ç™¼é€"], button[title*="Send"]',
        
        // å°è©±å…ƒç´ 
        messageContainer: '.message, .chat-message',
        userMessage: '.user-message, .message.user',
        assistantMessage: '.assistant-message, .message.assistant'
    }
}
```

## ğŸ“‹ APIåƒè€ƒ

### TraeVSCodeController é¡

#### æ§‹é€ å‡½æ•¸
```javascript
new TraeVSCodeController(config)
```

#### ä¸»è¦æ–¹æ³•

##### initialize()
åˆå§‹åŒ–æ§åˆ¶å™¨ï¼Œå•Ÿå‹•VS Codeé€£æ¥
```javascript
await controller.initialize();
```

##### sendMessage(message, options)
ç™¼é€æ¶ˆæ¯åˆ°Traeæ’ä»¶
```javascript
const result = await controller.sendMessage('ä½ å¥½ï¼ŒTraeï¼');
// è¿”å›: { success: boolean, message: string, error?: string }
```

##### extractHistory(options)
æå–å®Œæ•´çš„å°è©±æ­·å²
```javascript
const history = await controller.extractHistory();
// è¿”å›: { 
//   success: boolean, 
//   messages: object, 
//   totalCount: number, 
//   outputFile: string 
// }
```

##### takeScreenshot(filename)
æˆªåœ–ç•¶å‰ç‹€æ…‹ï¼ˆèª¿è©¦ç”¨ï¼‰
```javascript
const path = await controller.takeScreenshot('debug.png');
```

##### cleanup()
æ¸…ç†è³‡æºï¼Œé—œé–‰ç€è¦½å™¨é€£æ¥
```javascript
await controller.cleanup();
```

### ä¾¿æ·å‡½æ•¸

#### sendMessageToTrae(message, config)
å¿«é€Ÿç™¼é€æ¶ˆæ¯çš„ä¾¿æ·å‡½æ•¸
```javascript
const { sendMessageToTrae } = require('./src/trae-vscode-controller');

const result = await sendMessageToTrae('æ¸¬è©¦æ¶ˆæ¯', {
    workspaceDir: '/path/to/project'
});
```

#### extractTraeHistory(config)
å¿«é€Ÿæå–æ­·å²çš„ä¾¿æ·å‡½æ•¸
```javascript
const { extractTraeHistory } = require('./src/trae-vscode-controller');

const history = await extractTraeHistory({
    outputDir: '/custom/output/dir'
});
```

## ğŸ¯ é«˜ç´šåŠŸèƒ½

### æ™ºèƒ½å…ƒç´ å®šä½
æ§åˆ¶å™¨ä½¿ç”¨å¤šé‡ç­–ç•¥ä¾†å®šä½Traeæ’ä»¶çš„UIå…ƒç´ ï¼š

1. **CSSé¸æ“‡å™¨å®šä½**ï¼šä½¿ç”¨é å®šç¾©çš„é¸æ“‡å™¨
2. **æ–‡æœ¬å…§å®¹å®šä½**ï¼šé€šéæŒ‰éˆ•æ–‡å­—ç­‰å®šä½
3. **ä½ç½®å®šä½**ï¼šç•¶å…¶ä»–æ–¹æ³•å¤±æ•—æ™‚ä½¿ç”¨åº§æ¨™å®šä½
4. **æ´»å‹•å…ƒç´ æª¢æ¸¬**ï¼šæª¢æ¸¬ç•¶å‰èšç„¦çš„å…ƒç´ 

### æ¶ˆæ¯åˆ†é¡ç³»çµ±
è‡ªå‹•å°‡æå–çš„å°è©±æ­·å²åˆ†é¡ç‚ºï¼š

- **æ€è€ƒ**ï¼šåŒ…å«åˆ†æã€è©•ä¼°ã€è¨ˆåŠƒç­‰é—œéµè©çš„æ¶ˆæ¯
- **è§€å¯Ÿ**ï¼šåŒ…å«ç™¼ç¾ã€æª¢æ¸¬ã€ç¢ºèªç­‰é—œéµè©çš„æ¶ˆæ¯
- **è¡Œå‹•**ï¼šåŒ…å«åŸ·è¡Œã€å‰µå»ºã€æ“ä½œç­‰é—œéµè©çš„æ¶ˆæ¯
- **å…¶ä»–**ï¼šä¸ç¬¦åˆä¸Šè¿°åˆ†é¡çš„æ¶ˆæ¯

### éŒ¯èª¤è™•ç†å’Œé‡è©¦
- è‡ªå‹•é‡è©¦å¤±æ•—çš„æ“ä½œ
- æ™ºèƒ½é™ç´šç­–ç•¥ï¼ˆCSSé¸æ“‡å™¨ â†’ ä½ç½®å®šä½ï¼‰
- è©³ç´°çš„éŒ¯èª¤æ—¥èªŒå’Œèª¿è©¦ä¿¡æ¯

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### 1. ç„¡æ³•é€£æ¥åˆ°VS Code
**ç—‡ç‹€**ï¼š`Failed to connect to VS Code`
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```bash
# ç¢ºä¿VS Codeä»¥èª¿è©¦æ¨¡å¼å•Ÿå‹•
code --remote-debugging-port=9222 /your/project

# æª¢æŸ¥ç«¯å£æ˜¯å¦è¢«ä½”ç”¨
lsof -i :9222

# å˜—è©¦ä¸åŒçš„ç«¯å£
code --remote-debugging-port=9223 /your/project
```

#### 2. æ‰¾ä¸åˆ°Traeæ’ä»¶é¢æ¿
**ç—‡ç‹€**ï¼š`Cannot find Trae panel`
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ç¢ºä¿Traeæ’ä»¶å·²å®‰è£ä¸¦å•Ÿç”¨
2. æ‰‹å‹•æ‰“é–‹Traeé¢æ¿
3. æª¢æŸ¥æ’ä»¶æ˜¯å¦åœ¨å³å´é‚Šæ¬„
4. å˜—è©¦ä½¿ç”¨å‘½ä»¤é¢æ¿ï¼š`Cmd+Shift+P` â†’ `Trae`

#### 3. è¼¸å…¥æ¡†å®šä½å¤±æ•—
**ç—‡ç‹€**ï¼š`Cannot find input box`
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. æˆªåœ–èª¿è©¦ï¼š`node src/trae-vscode-cli.js screenshot`
2. æª¢æŸ¥Traeé¢æ¿æ˜¯å¦å®Œå…¨åŠ è¼‰
3. èª¿æ•´é¸æ“‡å™¨é…ç½®
4. ä½¿ç”¨ä½ç½®å®šä½ä½œç‚ºå‚™ç”¨æ–¹æ¡ˆ

#### 4. æ¶ˆæ¯ç™¼é€å¤±æ•—
**ç—‡ç‹€**ï¼š`Message send failed`
**è§£æ±ºæ–¹æ¡ˆ**ï¼š
1. ç¢ºä¿è¼¸å…¥æ¡†å¯è¦‹ä¸”å¯ç·¨è¼¯
2. æª¢æŸ¥ç™¼é€æŒ‰éˆ•æ˜¯å¦å¯é»æ“Š
3. å˜—è©¦ä½¿ç”¨Enteréµç™¼é€
4. å¢åŠ ç­‰å¾…æ™‚é–“

### èª¿è©¦æŠ€å·§

#### å•Ÿç”¨è©³ç´°æ—¥èªŒ
```javascript
const controller = new TraeVSCodeController({
    logLevel: 'debug'
});
```

#### æˆªåœ–èª¿è©¦
```bash
# åœ¨æ¯å€‹é—œéµæ­¥é©Ÿæˆªåœ–
node src/trae-vscode-cli.js screenshot
```

#### æª¢æŸ¥VS Codeé€²ç¨‹
```bash
# macOS/Linux
ps aux | grep "Visual Studio Code"

# æª¢æŸ¥èª¿è©¦ç«¯å£
netstat -an | grep 9222
```

## ğŸ”„ èˆ‡åŸAppleScriptçš„å°æ¯”

| ç‰¹æ€§ | AppleScript | Trae VS Code Controller |
|------|-------------|------------------------|
| ç©©å®šæ€§ | âš ï¸ ä¾è³´UIè®ŠåŒ– | âœ… å¤šé‡å®šä½ç­–ç•¥ |
| é€Ÿåº¦ | ğŸŒ è¼ƒæ…¢ | âš¡ å¿«é€Ÿ |
| èª¿è©¦ | âŒ å›°é›£ | âœ… è±å¯Œçš„èª¿è©¦å·¥å…· |
| è·¨å¹³å° | âŒ åƒ…macOS | âœ… macOS/Linux/Windows |
| éŒ¯èª¤è™•ç† | âŒ åŸºç¤ | âœ… å®Œå–„çš„éŒ¯èª¤è™•ç† |
| å¯æ“´å±•æ€§ | âŒ æœ‰é™ | âœ… é«˜åº¦å¯æ“´å±• |

## ğŸš€ æœ€ä½³å¯¦è¸

### 1. ç’°å¢ƒè¨­ç½®
- å§‹çµ‚ä»¥èª¿è©¦æ¨¡å¼å•Ÿå‹•VS Code
- ç¢ºä¿Traeæ’ä»¶é¢æ¿å¯è¦‹
- ä½¿ç”¨ç©©å®šçš„å·¥ä½œå€ç›®éŒ„

### 2. éŒ¯èª¤è™•ç†
- ä½¿ç”¨try-catchåŒ…è£æ‰€æœ‰æ“ä½œ
- æª¢æŸ¥è¿”å›å€¼çš„successå­—æ®µ
- ä¿å­˜èª¿è©¦æˆªåœ–ç”¨æ–¼å•é¡Œè¨ºæ–·

### 3. æ€§èƒ½å„ªåŒ–
- é‡ç”¨æ§åˆ¶å™¨å¯¦ä¾‹é€²è¡Œå¤šæ¬¡æ“ä½œ
- é©ç•¶è¨­ç½®è¶…æ™‚æ™‚é–“
- ä½¿ç”¨headlessæ¨¡å¼æé«˜é€Ÿåº¦

### 4. å®‰å…¨è€ƒæ…®
- ä¸è¦åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­æš´éœ²èª¿è©¦ç«¯å£
- å®šæœŸæ¸…ç†è¼¸å‡ºç›®éŒ„
- ä¿è­·æ•æ„Ÿçš„å°è©±å…§å®¹

## ğŸ“ˆ æœªä¾†è¦åŠƒ

- [ ] æ”¯æŒæ›´å¤šVS Codeæ’ä»¶
- [ ] å¢å¼·çš„æ¶ˆæ¯åˆ†é¡ç®—æ³•
- [ ] å¯¦æ™‚å°è©±ç›£æ§
- [ ] æ‰¹é‡æ“ä½œæ”¯æŒ
- [ ] Webç•Œé¢ç®¡ç†å·¥å…·

---

**é–‹ç™¼åœ˜éšŠ**: Manus AI Team  
**æœ€å¾Œæ›´æ–°**: 2025-06-20  
**ç‰ˆæœ¬**: v2.0.0 (VS Codeæ’ä»¶å°ˆç‰ˆ)

